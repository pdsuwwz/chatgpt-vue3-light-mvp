# chatgpt-vue3-light-mvp

ğŸ’­ ä¸€ä¸ªå¯äºŒæ¬¡å¼€å‘ Chat Bot å¯¹è¯ Web ç«¯åŸå‹æ¨¡æ¿, åŸºäº Vue3ã€Vite 5ã€TypeScriptã€Naive UI ã€UnoCSS ç­‰ä¸»æµæŠ€æœ¯æ„å»º, ğŸ§¤ç®€å•é›†æˆå¤§æ¨¡å‹ API, é‡‡ç”¨å•è½® AI é—®ç­”å¯¹è¯æ¨¡å¼, æ¯æ¬¡æé—®ç‹¬ç«‹å“åº”, æ— éœ€ä¸Šä¸‹æ–‡, æ”¯æŒæ‰“å­—æœºæ•ˆæœæµå¼è¾“å‡º, é›†æˆ markdown-it, highlight.js è¯­æ³•é«˜äº®é¢„è§ˆ, ğŸ’¼ æ˜“äºå®šåˆ¶å’Œå¿«é€Ÿæ­å»º Chat ç±»å¤§è¯­è¨€æ¨¡å‹äº§å“


__[ğŸŒˆ Live Demo åœ¨çº¿ä½“éªŒ](https://pdsuwwz.github.io/chatgpt-vue3-light-mvp)__


## ğŸ‰ ç‰¹æ€§

* ğŸ› ï¸ **æ ¸å¿ƒæŠ€æœ¯æ ˆ**ï¼š__Vite 5 + Vue 3 + TypeScript + ESLint (v9)__
* ğŸ¨ **UI æ¡†æ¶**ï¼š__Naive UI 2.x__
* ğŸª„ **è§£æ”¾åŒæ‰‹**ï¼šå†…ç½® **Unplugin Auto Import**ï¼Œæ”¯æŒç»„ä»¶æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥ï¼Œæå‡å¼€å‘æ•ˆç‡
* ğŸŒŸ **å›¾æ ‡æ”¯æŒ**ï¼šå†…ç½® **UnoCSS + Iconify**ï¼Œå®ç°åŸå­åŒ–æ ·å¼å†…è”å’Œå›¾æ ‡æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥
* ğŸ’¬ **AI å¯¹è¯**ï¼šæ”¯æŒå•è½®å¯¹è¯ï¼Œç”¨æˆ·è¾“å…¥å³å¾— AI ç‹¬ç«‹å“åº”å›å¤ï¼Œæ— éœ€ä¸Šä¸‹æ–‡
* ğŸ“ **Markdown é¢„è§ˆ**ï¼šæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ä»£ç é«˜äº®ï¼Œé›†æˆ `markdown-it` å’Œ `highlight.js`
* ğŸ§ª **æ¨¡æ‹Ÿå¼€å‘æ¨¡å¼**ï¼šæä¾›æœ¬åœ°æ¨¡æ‹Ÿå¼€å‘æ¨¡å¼ï¼Œæ— éœ€çœŸå® API å³å¯å¼€å§‹å¼€å‘
* ğŸ”‘ **ç¯å¢ƒå˜é‡ç®¡ç†**ï¼šé€šè¿‡ `.env` æ–‡ä»¶ç®¡ç† API å¯†é’¥ï¼Œæ”¯æŒä¸åŒå¤§æ¨¡å‹çš„é…ç½®
* ğŸŒ **å¤§è¯­è¨€æ¨¡å‹ API**ï¼šå…¼å®¹ Spark æ˜Ÿç«è®¤çŸ¥å¤§æ¨¡å‹ã€SiliconFlowã€Ollama ç­‰ï¼Œå…è®¸è‡ªç”±æ‰©å±•
* ğŸš€ **çµæ´»æ‰©å±•**ï¼šè½»é‡çº§æ¨¡å—åŒ– MVP è®¾è®¡ï¼Œçº¯å‰ç«¯å¼€å‘ï¼Œé¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œå¿«é€Ÿæ­å»º AI å¯¹è¯åŸå‹


## å‰ç½®æ¡ä»¶

* Vue 3.x
* Node >= 18.12.x
* Pnpm 9.x
* **VS Code æ’ä»¶ `dbaeumer.vscode-eslint` >= v3.0.5 (pre-release)**

## è¿è¡Œæ•ˆæœ

![image](https://github.com/user-attachments/assets/6a066e66-1501-4816-880f-df37db658934)
![image](https://github.com/user-attachments/assets/71515bdc-1831-4421-b8df-127577d8a24d)


https://github.com/user-attachments/assets/42e8254f-d1bc-42e0-88dd-90279d040ae0


## å®‰è£…å’Œè¿è¡Œ

* å®‰è£…ä¾èµ–

```bash
pnpm i
```

* æœ¬åœ°å¼€å‘

```bash
pnpm dev
```

æœ¬åœ°è¿è¡Œåï¼Œå¯ä»¥é€šè¿‡è®¿é—® `http://localhost:2048` æ¥æŸ¥çœ‹åº”ç”¨ã€‚


## ğŸ”‘ é…ç½® API å¯†é’¥

åœ¨è¿è¡Œé¡¹ç›®ä¹‹å‰ï¼Œéœ€è¦è®¾ç½®å¤§è¯­è¨€æ¨¡å‹çš„ API å¯†é’¥ï¼š

1. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè‡ªåŠ¨åˆ›å»ºç¯å¢ƒå˜é‡æ¨¡æ¿æ–‡ä»¶ `.env` æ–‡ä»¶ï¼š
    ```sh
    cp .env.template .env
    ```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥

  ```sh
  VITE_SPARK_KEY=ä½ çš„_æ˜Ÿç«_API_Key # éœ€è¦ç”¨å†’å·æ‹¼æ¥keyå’Œsecretï¼Œæ ¼å¼å¦‚ `key123456:secret123456`
  VITE_SILICONFLOW_KEY=ä½ çš„_SiliconFlow_API_Key # é€šå¸¸ä»¥ `sk-` å¼€å¤´ï¼Œå¦‚ `sk-xxxxxx`
  ```

## ğŸŒ æ¨¡æ‹Ÿ/çœŸå® API æ¨¡å¼åˆ‡æ¢

æœ¬é¡¹ç›®æä¾›äº†ä¸€ä¸ªæ¨¡æ‹Ÿå¼€å‘æ¨¡å¼ï¼Œç”¨äºåœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒæˆ– Github ç­‰éƒ¨ç½²ç¯å¢ƒä¸­æ¨¡æ‹Ÿè°ƒç”¨å¤§æ¨¡å‹ç›¸å…³ç­–ç•¥ï¼Œæ— éœ€è°ƒç”¨çœŸå® API æ¥å£ã€‚è¯¥æ¨¡å¼åœ¨ [src/config/env.ts](src/config/env.ts) æ–‡ä»¶ä¸­å®šä¹‰ï¼Œç”±ä»¥ä¸‹ä»£ç æ§åˆ¶ï¼š

```ts
// src/config/env.ts

const isDev = import.meta.env.DEV

/**
 * TODO: è‹¥æ˜¯æœ¬åœ°å¼€å‘ç¯å¢ƒã€Github éƒ¨ç½²ç¯å¢ƒï¼Œåˆ™æ¨¡æ‹Ÿå¤§æ¨¡å‹ç›¸å…³ç­–ç•¥ï¼Œä¸è°ƒæ¥å£
 */
export const isMockDevelopment = isDev
  || process.env.VITE_ROUTER_MODE === 'hash'

// æ‰“å¼€æ­¤è¡Œï¼Œåˆ™ä¼šè°ƒç”¨çœŸå®çš„å¤§æ¨¡å‹æ¥å£ï¼ˆéœ€æå‰é…ç½®å¥½ Keyï¼‰
// export const isMockDevelopment = false
```
### é»˜è®¤é…ç½®

é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å¼€å‘ç¯å¢ƒæˆ–ä½¿ç”¨ `hash` è·¯ç”±æ¨¡å¼æ—¶, `isMockDevelopment` ä¼šè¢«è®¾ç½®ä¸º `true`, è¿™æ„å‘³ç€åº”ç”¨å°†ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®è€Œä¸æ˜¯çœŸå®çš„å¤§æ¨¡å‹ API æ¥å£ã€‚

### åˆ‡æ¢è‡³çœŸå® API

å¦‚æœæƒ³åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ä½¿ç”¨çœŸå®çš„ APIï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š

1. **å–æ¶ˆæ³¨é‡Š**ï¼šå°†æœ€åä¸€è¡Œçš„ä»£ç æ³¨é‡Šå–æ¶ˆï¼Œè®¾ç½® `isMockDevelopment = false`

2. **ä¿®æ”¹é€»è¾‘**ï¼šå…¨å±€æœç´¢ `isMockDevelopment`, å¹¶ä¿®æ”¹ç›¸åº”çš„ if åˆ¤æ–­é€»è¾‘ï¼Œä½¿å…¶é»˜è®¤ä½¿ç”¨çœŸå®æ¥å£

**è¯·æ³¨æ„ï¼Œæ— è®ºé€‰æ‹©å“ªç§æ–¹å¼ï¼Œéƒ½éœ€è¦ç¡®ä¿é¡¹ç›®å·²ç»æ­£ç¡®é…ç½®äº† `.env` API å¯†é’¥**

---

## ğŸ¦™ æ¥å…¥å¤§è¯­è¨€æ¨¡å‹ API

### å›½å†…åœ¨çº¿å¤§æ¨¡å‹

**1. Spark æ˜Ÿç«è®¤çŸ¥å¤§æ¨¡å‹**ï¼š

- **æ³¨å†Œ**ï¼šè®¿é—® [æ˜Ÿç«å¤§æ¨¡å‹ API](https://xinghuo.xfyun.cn/sparkapi) è¿›è¡Œæ³¨å†Œå¹¶ç™»å½•
- **è·å– API å¯†é’¥**ï¼šè®¿é—® [æ§åˆ¶å°](https://console.xfyun.cn/services/bm4) è·å– `APIKey` å’Œ `APISecret`

![image](https://github.com/user-attachments/assets/8761d59d-b4c3-41d5-9c58-14a5b0f4389c)

- **æ¥å£è¯´æ˜**ï¼š[spark HTTP è°ƒç”¨æ–‡æ¡£](https://www.xfyun.cn/doc/spark/HTTP%E8%B0%83%E7%94%A8%E6%96%87%E6%A1%A3.html#_1-%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E)

![image](https://github.com/user-attachments/assets/71334353-b6c1-4778-ae21-95e98860d2b1)

- **é…ç½®åˆ°æœ¬ä»“åº“**ï¼šå°†åˆ›å»ºçš„ `APIKey` å’Œ `APISecret` å¯†é’¥ç”¨å†’å· `:` æ‹¼æ¥å¡«å…¥åˆ° `.env` æ–‡ä»¶ä¸­çš„ `VITE_SPARK_KEY` ç¯å¢ƒå˜é‡


**2. SiliconFlow å¤§æ¨¡å‹**ï¼š
- **æ³¨å†Œ**ï¼šè®¿é—® [SiliconFlow å®˜ç½‘](https://siliconflow.cn/zh-cn/siliconcloud) è¿›è¡Œæ³¨å†Œç™»å½•å¹¶åˆ›å»º API å¯†é’¥
- **åˆ›å»º API å¯†é’¥**ï¼šè®¿é—® [è´¦æˆ·ç®¡ç† - API å¯†é’¥](https://cloud.siliconflow.cn/account/ak) åˆ›å»ºæ–° API å¯†é’¥

![image](https://github.com/user-attachments/assets/31e1ef13-869a-4695-a7c0-054d2c3e877f)

- **æ¥å£è¯´æ˜**ï¼š[å®˜æ–¹ Chat Completions åœ¨çº¿è°ƒè¯•](https://docs.siliconflow.cn/reference/chat-completions-3)
- **é…ç½®åˆ°æœ¬ä»“åº“**ï¼šå°†åˆ›å»ºçš„ API å¯†é’¥å¡«å…¥ `.env` æ–‡ä»¶ä¸­çš„ `VITE_SILICONFLOW_KEY` ç¯å¢ƒå˜é‡
- **SiliconFlowç°å·²æ”¯æŒçš„å¤§æ¨¡å‹**ï¼š[æ¨¡å‹åˆ—è¡¨](https://siliconflow.cn/zh-cn/models)

![image](https://github.com/user-attachments/assets/f320f495-cb17-48ff-99c4-aaedbf87fc84)


### ä½¿ç”¨æœ¬åœ° Ollama å¤§æ¨¡å‹

**Ollama3 å¤§æ¨¡å‹**ï¼š
- **å®‰è£…**ï¼šOllama3 ä¸éœ€è¦ API å¯†é’¥ï¼Œåªéœ€è¦åœ¨æœ¬åœ°å®‰è£…å¹¶è¿è¡Œ Ollama å³å¯ã€‚è¯·å‚è€ƒ Ollama å®˜æ–¹æ–‡æ¡£è¿›è¡Œå®‰è£…ï¼š[Ollama GitHub](https://github.com/ollama/ollama)
- **è¿è¡Œ**ï¼šè¿è¡Œ Ollama3 æœåŠ¡ï¼Œç›´æ¥æ‰§è¡Œ `ollama run llama3`, è¿è¡Œåç¡®ä¿å…¶åœ¨ `http://localhost:11434` è¿è¡Œ

![image](https://github.com/user-attachments/assets/f3955060-a22d-4db8-b162-7393c10403f6)

- **æŸ¥çœ‹è¿è¡ŒçŠ¶æ€**ï¼šæ‰§è¡Œ `ollama list`å‘½ä»¤å¯æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„ Ollama æ¨¡å‹

![image](https://github.com/user-attachments/assets/8c6cf637-fd5b-45b5-93c2-f58927b7110c)

---

## ğŸ”Œ å¤§æ¨¡å‹å“åº”å¤„ç†

ç”±äºä¸åŒå¤§æ¨¡å‹çš„å“åº”ç»“æœç»“æ„æœ‰æ‰€å·®å¼‚ï¼Œæœ¬é¡¹ç›®å°è£…äº†ä¸€ä¸ª `model` å­—æ®µï¼Œç”¨äºæ§åˆ¶å“åº”ç»“æœçš„è½¬æ¢å’Œå­—æ®µæå–ã€‚

### ğŸ§  å·²æ”¯æŒçš„æ¨¡å‹

- **ï¼ˆé»˜è®¤ç±»å‹ï¼‰æ¨¡æ‹Ÿæ•°æ®æ¨¡å‹**ï¼š`standard`
- **Spark æ˜Ÿç«å¤§æ¨¡å‹**ï¼š`spark`
- **llama 3 å¤§æ¨¡å‹**ï¼š`ollama3`
- **SiliconFlow ç¡…åŸºæµåŠ¨å¤§æ¨¡å‹**ï¼š`siliconflow`

### ğŸ”¬ ä¸»è¦å®ç°

- **LLMTypes**: å®šä¹‰äº†æ”¯æŒçš„å¤§æ¨¡å‹åˆ—è¡¨åŠå…¶å¯¹åº”çš„ modelNameï¼Œ[è¯¦è§ä»£ç ](src/components/MarkdownPreview/transform/index.ts#L39)
- **TransformStreamModelTypes**: åŸºäº LLMTypes æ¨å¯¼å‡ºæ¥çš„å®šä¹‰çš„æ¨¡å‹åç§°ç±»å‹ï¼Œ[è¯¦è§ä»£ç ](src/components/MarkdownPreview/transform/index.ts#L58)
- **transformStreamValue**: åŒ…å«äº†é’ˆå¯¹å„ç§æ¨¡å‹çš„å“åº”ç»“æœè½¬æ¢å‡½æ•°ï¼Œ[è¯¦è§ä»£ç ](src/components/MarkdownPreview/transform/index.ts#L63)
- **MarkdownPreview ç»„ä»¶**: æ¥æ”¶ `model` props å±æ€§ï¼Œæ ¹æ®ä¸åŒæ¨¡å‹ç±»å‹å¤„ç†æµå¼å“åº”ï¼Œ[è¯¦è§ä»£ç ](src/components/MarkdownPreview/index.vue#L15)

### ğŸ“š ä½¿ç”¨ç¤ºä¾‹

åœ¨ä½¿ç”¨ [`MarkdownPreview`](src/components/MarkdownPreview/index.vue) ç»„ä»¶æ—¶ï¼Œé€šè¿‡è®¾ç½® `model` å±æ€§æ¥æŒ‡å®šå½“å‰ä½¿ç”¨çš„å¤§æ¨¡å‹ç±»å‹ï¼š

```html
<MarkdownPreview
  v-model:reader="outputTextReader"
  :model="defaultLLMTypeName"
  @failed="onFailedReader"
  @completed="onCompletedReader"
/>
```

å…¶ä¸­ [`defaultLLMTypeName`](src/views/chat.vue#L15) ä¼šæ ¹æ®æ˜ å°„è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„æ¨¡å‹ï¼ˆä¹Ÿå¯å…·ä½“æŒ‡å®šä¸€ä¸ªæ¨¡å‹ï¼‰ï¼š

```ts
const defaultLLMTypeName: TransformStreamModelTypes = isMockDevelopment
  ? 'standard'
  : 'spark'
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šå¤„ç† `spark` æ¨¡å‹ï¼Œåœ¨æ¨¡æ‹Ÿå¼€å‘ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ standard æ¨¡å‹ã€‚å…·ä½“çš„æ¨¡å‹ç±»å‹å¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œé…ç½®ã€‚

#### ğŸ’¡ æç¤º

> `defaultLLMTypeName` ä¼šæ ¹æ®æ¨¡å‹æ˜ å°„è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šæ¨¡å‹
> 
> å¦‚æœåç«¯è¿”å›çš„æ˜¯å¯ç›´æ¥æ¸²æŸ“çš„çº¯å­—ç¬¦ä¸²ï¼ˆè€Œé JSONï¼‰ï¼Œstandard æ¨¡å‹å°†é€‚ç”¨äºæ‰€æœ‰è¿™ç§æƒ…å†µ

## ğŸŒ¹ æ”¯æŒ

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®æˆ–å‘ç°æœ‰ç”¨ï¼Œå¯ä»¥ç‚¹å³ä¸Šè§’ [`Star`](https://github.com/pdsuwwz/chatgpt-vue3-light-mvp) æ”¯æŒä¸€ä¸‹ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘ä»¬ä¸æ–­æ”¹è¿›çš„åŠ¨åŠ›ï¼Œæ„Ÿè°¢ï¼ ^_^ 


## ğŸ˜ Awesome

* [awesome-vite](https://github.com/pdsuwwz/awesome-vite)

## License

[MIT](./LICENSE) License | Copyright Â© 2020-PRESENT [Wisdom](https://github.com/pdsuwwz)

